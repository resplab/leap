


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="index.html">
      
      
        <link rel="next" href="model-glm.html">
      
      
      <link rel="icon" href="">
    
    
      
        <title>Simulation - </title>
      
    
    
      
        
      
      


    
    
      
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="../_static/sphinx_immaterial_theme.c15b9f3ac86171432.min.css" />
        <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
        <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#iterating-over-years" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="" class="md-header__button md-logo" aria-label="" data-md-component="logo">
      <img src="../_static/logo.png" alt="logo">
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Simulation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/resplab/leap/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    LEAP
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="" class="md-nav__button md-logo" aria-label="" data-md-component="logo">
      <img src="../_static/logo.png" alt="logo">
    </a>
    
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/resplab/leap/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    LEAP
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span title="/installation.rst (reference label)"><span>Installation</span></span>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span title="/cli/index.rst (reference label)"><span>Running LEAP</span></span>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    <span title="/model/index.rst (reference label)"><span>Model</span></span>
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            <span title="/model/index.rst (reference label)"><span>Model</span></span>
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    <span title="/model/model-simulation.rst (reference label)"><span>Simulation</span></span>
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    <span title="/model/model-simulation.rst (reference label)"><span>Simulation</span></span>
    
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      <span title="/model/model-simulation.rst (reference label)"><span>Simulation</span></span>
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#iterating-over-years" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#iterating-over-years (reference label)"><span>Iterating Over Years</span></span>
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Iterating Over Years">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initial-year" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#initial-year (reference label)"><span>Initial Year</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsequent-years" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#subsequent-years (reference label)"><span>Subsequent Years</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#example (reference label)"><span>Example</span></span>
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iterating-over-agents" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#iterating-over-agents (reference label)"><span>Iterating Over Agents</span></span>
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Iterating Over Agents">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agent-initialization" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#agent-initialization (reference label)"><span>Agent Initialization</span></span>
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Agent Initialization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-check-if-the-agent-is-over-3-years-old" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-1-check-if-the-agent-is-over-3-years-old (reference label)"><span>Step 1:<wbr> Check if the agent is over 3 years old</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-check-if-the-agent-has-asthma" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-2-check-if-the-agent-has-asthma (reference label)"><span>Step 2:<wbr> Check if the agent has asthma</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-determine-the-age-of-asthma-diagnosis" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-3-determine-the-age-of-asthma-diagnosis (reference label)"><span>Step 3:<wbr> Determine the age of asthma diagnosis</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-check-hospitalizations" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-4-check-hospitalizations (reference label)"><span>Step 4:<wbr> Check hospitalizations</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-determine-asthma-control-levels" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-5-determine-asthma-control-levels (reference label)"><span>Step 5:<wbr> Determine asthma control levels</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-6-compute-the-number-of-asthma-exacerbations-in-the-current-year" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-6-compute-the-number-of-asthma-exacerbations-in-the-current-year (reference label)"><span>Step 6:<wbr> Compute the number of asthma exacerbations in the current year</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-7-compute-the-severity-of-the-asthma-exacerbations-in-the-current-year" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-7-compute-the-severity-of-the-asthma-exacerbations-in-the-current-year (reference label)"><span>Step 7:<wbr> Compute the severity of the asthma exacerbations in the current year</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-8-update-the-number-of-hospitalizations" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-8-update-the-number-of-hospitalizations (reference label)"><span>Step 8:<wbr> Update the number of hospitalizations</span></span>
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iterating-over-lifetime" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#iterating-over-lifetime (reference label)"><span>Iterating Over Lifetime</span></span>
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Iterating Over Lifetime">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-check-if-agent-has-asthma" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-1-check-if-agent-has-asthma (reference label)"><span>Step 1:<wbr> Check if agent has asthma</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-check-if-agent-gets-a-new-asthma-diagnosis" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-2-check-if-agent-gets-a-new-asthma-diagnosis (reference label)"><span>Step 2:<wbr> Check if agent gets a new asthma diagnosis</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-compute-the-control-levels" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-3-compute-the-control-levels (reference label)"><span>Step 3:<wbr> Compute the control levels</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-compute-the-number-of-asthma-exacerbations-in-the-current-year" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-4-compute-the-number-of-asthma-exacerbations-in-the-current-year (reference label)"><span>Step 4:<wbr> Compute the number of asthma exacerbations in the current year</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-compute-the-severity-of-the-asthma-exacerbations-in-the-current-year" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-5-compute-the-severity-of-the-asthma-exacerbations-in-the-current-year (reference label)"><span>Step 5:<wbr> Compute the severity of the asthma exacerbations in the current year</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-6-update-the-number-of-hospitalizations" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-6-update-the-number-of-hospitalizations (reference label)"><span>Step 6:<wbr> Update the number of hospitalizations</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-7-reassess-asthma-diagnosis" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-7-reassess-asthma-diagnosis (reference label)"><span>Step 7:<wbr> Reassess asthma diagnosis</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-8-compute-utility" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-8-compute-utility (reference label)"><span>Step 8:<wbr> Compute utility</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-9-compute-cost" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-9-compute-cost (reference label)"><span>Step 9:<wbr> Compute cost</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-10-check-if-agent-dies" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-10-check-if-agent-dies (reference label)"><span>Step 10:<wbr> Check if agent dies</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-11-check-if-agent-emigrates" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-11-check-if-agent-emigrates (reference label)"><span>Step 11:<wbr> Check if agent emigrates</span></span>
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="model-glm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span title="/model/model-glm.ipynb (reference label)"><span>Generalized Linear Models</span></span>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="model-birth.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span title="/model/model-birth.rst (reference label)"><span>Birth Model</span></span>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="model-death.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span title="/model/model-death.rst (reference label)"><span>Mortality Model</span></span>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="model-migration.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span title="/model/model-migration.rst (reference label)"><span>Immigration / Emigration Model</span></span>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="model-antibiotics.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span title="/model/model-antibiotics.rst (reference label)"><span>Antibiotic Exposure Model</span></span>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="model-occurrence.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span title="/model/model-occurrence.rst (reference label)"><span>Asthma Occurrence Model</span></span>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="model-control.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span title="/model/model-control.rst (reference label)"><span>Asthma Control Model</span></span>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="model-exacerbation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span title="/model/model-exacerbation.rst (reference label)"><span>Asthma Exacerbations Model</span></span>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="model-cost.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span title="/model/model-cost.rst (reference label)"><span>Asthma Cost Model</span></span>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="model-utility.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span title="/model/model-utility.rst (reference label)"><span>Utility Model</span></span>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="model-pollution.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span title="/model/model-pollution.rst (reference label)"><span>Pollution Model</span></span>
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../dev/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span title="/dev/index.rst (reference label)"><span>Developers</span></span>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../references.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span title="/references.rst (reference label)"><span>References</span></span>
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      <span title="/model/model-simulation.rst (reference label)"><span>Simulation</span></span>
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#iterating-over-years" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#iterating-over-years (reference label)"><span>Iterating Over Years</span></span>
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Iterating Over Years">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initial-year" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#initial-year (reference label)"><span>Initial Year</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsequent-years" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#subsequent-years (reference label)"><span>Subsequent Years</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#example (reference label)"><span>Example</span></span>
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iterating-over-agents" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#iterating-over-agents (reference label)"><span>Iterating Over Agents</span></span>
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Iterating Over Agents">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agent-initialization" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#agent-initialization (reference label)"><span>Agent Initialization</span></span>
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Agent Initialization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-check-if-the-agent-is-over-3-years-old" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-1-check-if-the-agent-is-over-3-years-old (reference label)"><span>Step 1:<wbr> Check if the agent is over 3 years old</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-check-if-the-agent-has-asthma" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-2-check-if-the-agent-has-asthma (reference label)"><span>Step 2:<wbr> Check if the agent has asthma</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-determine-the-age-of-asthma-diagnosis" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-3-determine-the-age-of-asthma-diagnosis (reference label)"><span>Step 3:<wbr> Determine the age of asthma diagnosis</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-check-hospitalizations" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-4-check-hospitalizations (reference label)"><span>Step 4:<wbr> Check hospitalizations</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-determine-asthma-control-levels" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-5-determine-asthma-control-levels (reference label)"><span>Step 5:<wbr> Determine asthma control levels</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-6-compute-the-number-of-asthma-exacerbations-in-the-current-year" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-6-compute-the-number-of-asthma-exacerbations-in-the-current-year (reference label)"><span>Step 6:<wbr> Compute the number of asthma exacerbations in the current year</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-7-compute-the-severity-of-the-asthma-exacerbations-in-the-current-year" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-7-compute-the-severity-of-the-asthma-exacerbations-in-the-current-year (reference label)"><span>Step 7:<wbr> Compute the severity of the asthma exacerbations in the current year</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-8-update-the-number-of-hospitalizations" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-8-update-the-number-of-hospitalizations (reference label)"><span>Step 8:<wbr> Update the number of hospitalizations</span></span>
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iterating-over-lifetime" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#iterating-over-lifetime (reference label)"><span>Iterating Over Lifetime</span></span>
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Iterating Over Lifetime">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-check-if-agent-has-asthma" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-1-check-if-agent-has-asthma (reference label)"><span>Step 1:<wbr> Check if agent has asthma</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-check-if-agent-gets-a-new-asthma-diagnosis" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-2-check-if-agent-gets-a-new-asthma-diagnosis (reference label)"><span>Step 2:<wbr> Check if agent gets a new asthma diagnosis</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-compute-the-control-levels" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-3-compute-the-control-levels (reference label)"><span>Step 3:<wbr> Compute the control levels</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-compute-the-number-of-asthma-exacerbations-in-the-current-year" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-4-compute-the-number-of-asthma-exacerbations-in-the-current-year (reference label)"><span>Step 4:<wbr> Compute the number of asthma exacerbations in the current year</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-compute-the-severity-of-the-asthma-exacerbations-in-the-current-year" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-5-compute-the-severity-of-the-asthma-exacerbations-in-the-current-year (reference label)"><span>Step 5:<wbr> Compute the severity of the asthma exacerbations in the current year</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-6-update-the-number-of-hospitalizations" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-6-update-the-number-of-hospitalizations (reference label)"><span>Step 6:<wbr> Update the number of hospitalizations</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-7-reassess-asthma-diagnosis" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-7-reassess-asthma-diagnosis (reference label)"><span>Step 7:<wbr> Reassess asthma diagnosis</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-8-compute-utility" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-8-compute-utility (reference label)"><span>Step 8:<wbr> Compute utility</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-9-compute-cost" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-9-compute-cost (reference label)"><span>Step 9:<wbr> Compute cost</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-10-check-if-agent-dies" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-10-check-if-agent-dies (reference label)"><span>Step 10:<wbr> Check if agent dies</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-11-check-if-agent-emigrates" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-simulation.rst#step-11-check-if-agent-emigrates (reference label)"><span>Step 11:<wbr> Check if agent emigrates</span></span>
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                
                
                  


  
  

<h1 id="simulation">Simulation<a class="headerlink" href="#simulation" title="Permalink to this heading">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">LEAP</span></code> model simulates asthma outcomes over a lifetime, incorporating different factors such
as age, sex, location, antibiotic use, and other health-related variables.</p>
<p>First, let us take a look at the different input parameters:</p>
<table class="docutils data align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">province</span></code></p></td>
<td><p>The province in Canada to run the simulation. Currently only <code class="docutils literal notranslate"><span class="pre">BC</span></code> and <code class="docutils literal notranslate"><span class="pre">CA</span></code> are
supported.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">population_growth_type</span></code></p></td>
<td><p>Statistics Canada uses different population growth types to model different population
growth possibilities.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">num_births_initial</span></code></p></td>
<td><p>The number of births in the initial year of the simulation. This determines the overall
population size at the start of the simulation.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max_age</span></code></p></td>
<td><p>The maximum age of a person in the model.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">until_all_die</span></code></p></td>
<td><p>Whether or not to keep the simulation running until all members of the population have
died.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min_year</span></code></p></td>
<td><p>The year to start the simulation.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">time_horizon</span></code></p></td>
<td><p>How many years to run the simulation for.</p></td>
</tr>
</tbody>
</table>
<h2 id="iterating-over-years">Iterating Over Years<a class="headerlink" href="#iterating-over-years" title="Permalink to this heading">¶</a></h2>
<h3 id="initial-year">Initial Year<a class="headerlink" href="#initial-year" title="Permalink to this heading">¶</a></h3>
<p>To start the simulation, we begin with the initial year, <code class="docutils literal notranslate"><span class="pre">min_year</span></code>. For the first year, we
create a list of <code class="docutils literal notranslate"><span class="pre">agents</span></code>, or people, who are born in that year, aged 0. The number of agents
in this list is determined by the <code class="docutils literal notranslate"><span class="pre">num_births_initial</span></code> parameter.</p>
<h3 id="subsequent-years">Subsequent Years<a class="headerlink" href="#subsequent-years" title="Permalink to this heading">¶</a></h3>
<p>For all subsequent years, we create a list of agents who are either born in that year or who
immigrated to the province in that year. The number of births in subsequent years is determined by
the <a class="reference internal" href="model-birth.html#birth-model"><span class="std std-ref">Birth Model</span></a>, which factors in the population growth type and the number of births
in the previous year. The number of immigrants is determined by the <a class="reference internal" href="model-migration.html#migration-model"><span class="std std-ref">Immigration / Emigration Model</span></a>.</p>
<h3 id="example">Example<a class="headerlink" href="#example" title="Permalink to this heading">¶</a></h3>
<p>Let’s suppose we have:</p>
<table class="docutils data align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>starting year</p></td>
<td><p>2021</p></td>
</tr>
<tr class="row-odd"><td><p>time horizon</p></td>
<td><p>10 years</p></td>
</tr>
<tr class="row-even"><td><p>province</p></td>
<td><p>BC</p></td>
</tr>
<tr class="row-odd"><td><p>population growth type</p></td>
<td><p>HG (High Growth)</p></td>
</tr>
<tr class="row-even"><td><p>number of births in initial year</p></td>
<td><p>100</p></td>
</tr>
<tr class="row-odd"><td><p>maximum age</p></td>
<td><p>90</p></td>
</tr>
</tbody>
</table>
<p>In the first year, we would create <code class="docutils literal notranslate"><span class="pre">100</span></code> agents, all aged <code class="docutils literal notranslate"><span class="pre">0</span></code>:</p>
<table class="docutils data align-default" id="id1">
<caption><span class="caption-text">Year: 2021</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Agent</p></th>
<th class="head"><p>age</p></th>
<th class="head"><p>sex</p></th>
<th class="head"><p>immigrant</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Agent 1</p></td>
<td><p>0</p></td>
<td><p>F</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-odd"><td><p>Agent 2</p></td>
<td><p>0</p></td>
<td><p>M</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-even"><td><p>Agent 3</p></td>
<td><p>0</p></td>
<td><p>M</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-odd"><td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
</tr>
<tr class="row-even"><td><p>Agent 100</p></td>
<td><p>0</p></td>
<td><p>F</p></td>
<td><p>no</p></td>
</tr>
</tbody>
</table>
<p>In the second year, 2022, we would calculate the number of births using the birth model:</p>
<div class="math notranslate nohighlight">
\[\begin{split}n(2022) &amp;= n(2021) * \dfrac{N(2022)}{N(2021)} \\
&amp;= 100 * \dfrac{46400}{42653} \\
&amp;= 1.09\\
&amp;\approx 109\end{split}\]</div>
<p>where:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(n(2022)\)</span> is the number of births in 2022, in the simulation</p></li>
<li><p><span class="math notranslate nohighlight">\(n(2021)\)</span> is the number of births in 2021, in the simulation</p></li>
<li><p><span class="math notranslate nohighlight">\(N(2022)\)</span> is the total number of births in 2022, for the <code class="docutils literal notranslate"><span class="pre">HG</span></code> scenario, from Statistics Canada</p></li>
<li><p><span class="math notranslate nohighlight">\(N(2021)\)</span> is the total number of births in 2021, for the <code class="docutils literal notranslate"><span class="pre">HG</span></code> scenario, from Statistics Canada</p></li>
</ul>
<p>We would then create 109 new agents, all aged 0, and add them to the list of agents for that year.
For the number of immigrants:</p>
<div class="math notranslate nohighlight">
\[\begin{split}i(2022) &amp;= n(2022) * \dfrac{I(2022)}{N(2022)} \\
&amp;= 109 * \dfrac{67190}{46400} \\
&amp;\approx 158\end{split}\]</div>
<p>where:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(i(2022)\)</span> is the number of immigrants to Canada in 2022, in the simulation</p></li>
<li><p><span class="math notranslate nohighlight">\(I(2022)\)</span> is the total number of immigrants to Canada in 2022, for the <code class="docutils literal notranslate"><span class="pre">HG</span></code> scenario,
from our model</p></li>
</ul>
<p>Now that we have the total number of immigrants for 2022, we want to distribute them across age
and sex. We do this using the data from the immigration model.</p>
<p>So we have a list of agents for 2022 that looks like this:</p>
<table class="docutils data align-default" id="id2">
<caption><span class="caption-text">Year: 2021</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Agent</p></th>
<th class="head"><p>age</p></th>
<th class="head"><p>sex</p></th>
<th class="head"><p>immigrant</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Agent 1</p></td>
<td><p>0</p></td>
<td><p>F</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-odd"><td><p>Agent 2</p></td>
<td><p>0</p></td>
<td><p>M</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-even"><td><p>Agent 3</p></td>
<td><p>0</p></td>
<td><p>M</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-odd"><td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
</tr>
<tr class="row-even"><td><p>Agent 109</p></td>
<td><p>0</p></td>
<td><p>F</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-odd"><td><p>Agent 110</p></td>
<td><p>29</p></td>
<td><p>M</p></td>
<td><p>yes</p></td>
</tr>
<tr class="row-even"><td><p>Agent 111</p></td>
<td><p>54</p></td>
<td><p>F</p></td>
<td><p>yes</p></td>
</tr>
<tr class="row-odd"><td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
</tr>
<tr class="row-even"><td><p>Agent 267</p></td>
<td><p>45</p></td>
<td><p>M</p></td>
<td><p>yes</p></td>
</tr>
</tbody>
</table>
<p>Since our time horizon is 10 years, we would continue this process for each year until we
reach 2031.</p>
<h2 id="iterating-over-agents">Iterating Over Agents<a class="headerlink" href="#iterating-over-agents" title="Permalink to this heading">¶</a></h2>
<p>Once we have our list of agents for a given year, we then simulate the lifetime of each agent, from
birth or immigration until either death or the maximum age is reached.</p>
<h3 id="agent-initialization">Agent Initialization<a class="headerlink" href="#agent-initialization" title="Permalink to this heading">¶</a></h3>
<p>To initialize an agent, we set the following initial attributes:</p>
<table class="docutils data align-default" id="id3">
<caption><span class="caption-text">Agent Initialization</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>age</p></td>
<td><p>Either newborn, or the age at which the agent immigrated to the province.</p></td>
</tr>
<tr class="row-odd"><td><p>sex</p></td>
<td><p>Randomly assigned based on either sex proportions at birth or immigration data.</p></td>
</tr>
<tr class="row-even"><td><p>immigrant</p></td>
<td><p>A boolean indicating whether the agent is an immigrant.</p></td>
</tr>
<tr class="row-odd"><td><p>census division</p></td>
<td><p>Each agent is randomly assigned to a census division based on the population distribution
in the province.</p></td>
</tr>
<tr class="row-even"><td><p>asthma control levels</p></td>
<td><p>Initial asthma control levels are set to:</p>
<ul class="simple">
<li><p>probability of fully-controlled asthma: 0.33</p></li>
<li><p>probability of partially-controlled asthma: 0.33</p></li>
<li><p>probability of uncontrolled asthma: 0.33</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>has asthma?</p></td>
<td><p>If the agent is less than 3 years old, they do not have asthma. Otherwise, they are assigned
an asthma status based on the asthma prevalence model.</p></td>
</tr>
<tr class="row-even"><td><p>exacerbation history</p></td>
<td><p>Initial exacerbation history is set to:</p>
<ul class="simple">
<li><p>number of exacerbations previous year: 0</p></li>
<li><p>number of exacerbations current year: 0</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<h4 id="step-1-check-if-the-agent-is-over-3-years-old">Step 1: Check if the agent is over 3 years old<a class="headerlink" href="#step-1-check-if-the-agent-is-over-3-years-old" title="Permalink to this heading">¶</a></h4>
<p>If the agent is over 3 years old, go to Step 2. If not, skip to Step 3.</p>
<h4 id="step-2-check-if-the-agent-has-asthma">Step 2: Check if the agent has asthma<a class="headerlink" href="#step-2-check-if-the-agent-has-asthma" title="Permalink to this heading">¶</a></h4>
<p>We use the asthma prevalence model to determine if the agent has asthma.</p>
<h4 id="step-3-determine-the-age-of-asthma-diagnosis">Step 3: Determine the age of asthma diagnosis<a class="headerlink" href="#step-3-determine-the-age-of-asthma-diagnosis" title="Permalink to this heading">¶</a></h4>
<p>If the agent was determined to have asthma in Step 2, we need to determine the age at which
the agent was diagnosed with asthma.</p>
<p>If the agent is 3 years old, the age of asthma diagnosis is 3.</p>
<p>If the agent is older than 3, we use the asthma incidence model to determine the age of asthma
diagnosis.</p>
<h4 id="step-4-check-hospitalizations">Step 4: Check hospitalizations<a class="headerlink" href="#step-4-check-hospitalizations" title="Permalink to this heading">¶</a></h4>
<p>Next, we check how many times agent has been hospitalized due to asthma in their lifetime.</p>
<h4 id="step-5-determine-asthma-control-levels">Step 5: Determine asthma control levels<a class="headerlink" href="#step-5-determine-asthma-control-levels" title="Permalink to this heading">¶</a></h4>
<p>We next determine the asthma control levels for the agent. The asthma control levels give the
probability of the agent having fully-controlled, partially-controlled, or uncontrolled asthma:</p>
<div class="math notranslate nohighlight">
\[\begin{split}k &amp;= 0: \text{fully-controlled asthma} \\
k &amp;= 1: \text{partially-controlled asthma} \\
k &amp;= 2: \text{uncontrolled asthma}\end{split}\]</div>
<p>The probabilities of each control level are given by ordinal regression, where y = control level:</p>
<div class="math notranslate nohighlight">
\[\begin{split}P(y \leq k) &amp;= \sigma(\theta_k - \eta) \\
P(y = k) &amp;= P(y \leq k) - P(y &lt; k + 1) \\
          &amp;= \sigma(\theta_k - \eta) - \sigma(\theta_{k+1} - \eta)\end{split}\]</div>
<p>where:</p>
<div class="math notranslate nohighlight">
\[\eta = \beta_0 +
    \text{age} \cdot \beta_{\text{age}} +
    \text{sex} \cdot \beta_{\text{sex}} +
    \text{age} \cdot \text{sex} \cdot \beta_{\text{sexage}} +
    \text{age}^2 \cdot \text{sex} \cdot \beta_{\text{sexage}^2} +
    \text{age}^2 \cdot \beta_{\text{age}^2}\]</div>
<h4 id="step-6-compute-the-number-of-asthma-exacerbations-in-the-current-year">Step 6: Compute the number of asthma exacerbations in the current year<a class="headerlink" href="#step-6-compute-the-number-of-asthma-exacerbations-in-the-current-year" title="Permalink to this heading">¶</a></h4>
<p>To compute the number of asthma exacerbations in the current year, we use the
exacerbation model, which takes into account the agent’s asthma control level, age, and sex,
as well as the current year. The probability of having <span class="math notranslate nohighlight">\(n\)</span> exacerbations is given by a
Poisson distribution:</p>
<div class="math notranslate nohighlight">
\[P(n = k) = \dfrac{\lambda^{k}e^{-\lambda}}{k!}\]</div>
<p>We determine the expected number of exacerbations, <span class="math notranslate nohighlight">\(\lambda\)</span>, using the following formula:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\lambda &amp;= e^{\mu} \\
\mu &amp;= \beta_0 +
    \beta_{\text{age}} \cdot \text{age} +
    \beta_{\text{sex}} \cdot \text{sex} \\
    &amp;+\beta_{uc} \cdot P(\text{uncontrolled}) +
    \beta_{pc} \cdot P(\text{partially controlled}) +
    \beta_{c} \cdot P(\text{fully controlled}) \\
    &amp;+\log(\alpha(\text{year}, \text{sex}, \text{age}))\end{split}\]</div>
<p>If the number of exacerbations is <code class="docutils literal notranslate"><span class="pre">0</span></code>, skip to the end. Otherwise, go to Step 7.</p>
<h4 id="step-7-compute-the-severity-of-the-asthma-exacerbations-in-the-current-year">Step 7: Compute the severity of the asthma exacerbations in the current year<a class="headerlink" href="#step-7-compute-the-severity-of-the-asthma-exacerbations-in-the-current-year" title="Permalink to this heading">¶</a></h4>
<p>There are four levels of severity for asthma exacerbations:</p>
<div class="math notranslate nohighlight">
\[\begin{split}k &amp;= 1: \text{mild} \\
k &amp;= 2: \text{moderate} \\
k &amp;= 3: \text{severe} \\
k &amp;= 4: \text{very severe / hospitalization}\end{split}\]</div>
<p>We assign the initial probability of each severity level using a Dirichlet distribution.</p>
<p>If the agent has been previously hospitalized due to asthma:</p>
<div class="math notranslate nohighlight">
\[\begin{split}P(k = 4 \mid t) &amp;= \begin{cases}
    P(k = 4 \mid t_0) \cdot \beta_{\text{prevhospped}} &amp; \text{if age} &lt; 14 \\
    P(k = 4 \mid t_0) \cdot \beta_{\text{prevhospadult}} &amp; \text{if age} \geq 14
\end{cases} \\
P(k = 1 \mid t) &amp;= P(k = 1 \mid t_0) \cdot (1 - P(k = 4 \mid t)) \\
P(k = 2 \mid t) &amp;= P(k = 2 \mid t_0) \cdot (1 - P(k = 4 \mid t)) \\
P(k = 3 \mid t) &amp;= P(k = 3 \mid t_0) \cdot (1 - P(k = 4 \mid t))\end{split}\]</div>
<p>Otherwise, we use the initial probabilities of each severity level. Then, to determine the
number of exacerbations of each severity level, we use a multinomial distribution:</p>
<div class="math notranslate nohighlight">
\[p(x_1, x_2, x_3, x_4; n, p) =
    \dfrac{n!}{x_1! x_2! x_3! x_4!} \prod_{i=1}^4 P(k = i)^{x_i}, \quad \text{where} \quad \sum_{i=1}^4 x_i = n\]</div>
<h4 id="step-8-update-the-number-of-hospitalizations">Step 8: Update the number of hospitalizations<a class="headerlink" href="#step-8-update-the-number-of-hospitalizations" title="Permalink to this heading">¶</a></h4>
<p>We add the total previous hospitalizations to the current year’s number of exacerbations at
severity level 4:</p>
<div class="math notranslate nohighlight">
\[\text{hospitalizations} = \text{previous hospitalizations} + x_4\]</div>
<p>where <span class="math notranslate nohighlight">\(x_4\)</span> is the number of exacerbations at severity level 4.</p>
<h3 id="iterating-over-lifetime">Iterating Over Lifetime<a class="headerlink" href="#iterating-over-lifetime" title="Permalink to this heading">¶</a></h3>
<p>For each agent, we simulate their lifetime by iterating over each year of their life. We start with
the year they were born or immigrated, and we continue until they reach the maximum age or
until they die. Each year, we update their age and check if they are still alive based
on the mortality model. If they are still alive, we update their health status, asthma control,
and other health-related variables based on the model’s parameters and the agent’s characteristics.
During a given year, the following events can occur:</p>
<ol class="arabic simple">
<li><p>Agent dies or reaches the maximum age. If so, we finish simulating that agent and go on to the next agent.</p></li>
<li><p>Agent has an asthma exacerbation.</p></li>
<li><p>Agent is hospitalized due to asthma.</p></li>
<li><p>Agent gets diagnosed with asthma.</p></li>
<li><p>Agent finds out that previous asthma diagnosis was incorrect.</p></li>
<li><p>Agent emigrates to another province or country.</p></li>
</ol>
<p>Let’s begin the simulation.</p>
<h4 id="step-1-check-if-agent-has-asthma"><span id="step-1-lifetime-iteration"></span>Step 1: Check if agent has asthma<a class="headerlink" href="#step-1-check-if-agent-has-asthma" title="Permalink to this heading">¶</a></h4>
<p>If the agent has asthma, go to Step 7. If not continue to Step 2.</p>
<h4 id="step-2-check-if-agent-gets-a-new-asthma-diagnosis">Step 2: Check if agent gets a new asthma diagnosis<a class="headerlink" href="#step-2-check-if-agent-gets-a-new-asthma-diagnosis" title="Permalink to this heading">¶</a></h4>
<p>We use the asthma incidence model to determine if the agent gets a new asthma diagnosis
in the current year of their lifetime. If they do not, skip to Step 4. If they do, we
set the age of diagnosis to the current age of the agent and go to Step 3.</p>
<h4 id="step-3-compute-the-control-levels">Step 3: Compute the control levels<a class="headerlink" href="#step-3-compute-the-control-levels" title="Permalink to this heading">¶</a></h4>
<p>We next determine the asthma control levels for the agent using the <a class="reference internal" href="model-control.html#control-model"><span class="std std-ref">Asthma Control Model</span></a>.
The asthma control levels give the probability of the agent having fully-controlled,
partially-controlled, or uncontrolled asthma:</p>
<div class="math notranslate nohighlight">
\[\begin{split}k &amp;= 0: \text{fully-controlled asthma} \\
k &amp;= 1: \text{partially-controlled asthma} \\
k &amp;= 2: \text{uncontrolled asthma}\end{split}\]</div>
<p>The probabilities of each control level are given by ordinal regression, where y = control level:</p>
<div class="math notranslate nohighlight">
\[\begin{split}P(y \leq k) &amp;= \sigma(\theta_k - \eta) \\
P(y = k) &amp;= P(y \leq k) - P(y &lt; k + 1) \\
          &amp;= \sigma(\theta_k - \eta) - \sigma(\theta_{k+1} - \eta)\end{split}\]</div>
<p>where:</p>
<div class="math notranslate nohighlight">
\[\eta = \beta_0 +
    \text{age} \cdot \beta_{\text{age}} +
    \text{sex} \cdot \beta_{\text{sex}} +
    \text{age} \cdot \text{sex} \cdot \beta_{\text{sexage}} +
    \text{age}^2 \cdot \text{sex} \cdot \beta_{\text{sexage}^2} +
    \text{age}^2 \cdot \beta_{\text{age}^2}\]</div>
<h4 id="step-4-compute-the-number-of-asthma-exacerbations-in-the-current-year">Step 4: Compute the number of asthma exacerbations in the current year<a class="headerlink" href="#step-4-compute-the-number-of-asthma-exacerbations-in-the-current-year" title="Permalink to this heading">¶</a></h4>
<p>To compute the number of asthma exacerbations in the current year, we use the
<a class="reference internal" href="model-exacerbation.html#exacerbation-model"><span class="std std-ref">Asthma Exacerbations Model</span></a>, which takes into account the agent’s asthma control level, age, and sex,
as well as the current year. The probability of having <span class="math notranslate nohighlight">\(n\)</span> exacerbations is given by a
Poisson distribution:</p>
<div class="math notranslate nohighlight">
\[P(n = k) = \dfrac{\lambda^{k}e^{-\lambda}}{k!}\]</div>
<p>We determine the expected number of exacerbations, <span class="math notranslate nohighlight">\(\lambda\)</span>, using the following formula:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\lambda &amp;= e^{\mu} \\
\mu &amp;= \beta_0 +
    \beta_{\text{age}} \cdot \text{age} +
    \beta_{\text{sex}} \cdot \text{sex} \\
    &amp;+\beta_{uc} \cdot P(\text{uncontrolled}) +
    \beta_{pc} \cdot P(\text{partially controlled}) +
    \beta_{c} \cdot P(\text{fully controlled}) \\
    &amp;+\log(\alpha(\text{year}, \text{sex}, \text{age}))\end{split}\]</div>
<p>If the number of exacerbations is <code class="docutils literal notranslate"><span class="pre">0</span></code>, skip to Step 8. Otherwise, go to Step 5.</p>
<h4 id="step-5-compute-the-severity-of-the-asthma-exacerbations-in-the-current-year">Step 5: Compute the severity of the asthma exacerbations in the current year<a class="headerlink" href="#step-5-compute-the-severity-of-the-asthma-exacerbations-in-the-current-year" title="Permalink to this heading">¶</a></h4>
<p>There are four levels of severity for asthma exacerbations:</p>
<div class="math notranslate nohighlight">
\[\begin{split}k &amp;= 1: \text{mild} \\
k &amp;= 2: \text{moderate} \\
k &amp;= 3: \text{severe} \\
k &amp;= 4: \text{very severe / hospitalization}\end{split}\]</div>
<p>If the agent has been previously hospitalized due to asthma:</p>
<div class="math notranslate nohighlight">
\[\begin{split}P(k = 4 \mid t) &amp;= \begin{cases}
    P(k = 4 \mid t - 1) \cdot \beta_{\text{prevhospped}} &amp; \text{if age} &lt; 14 \\
    P(k = 4 \mid t - 1) \cdot \beta_{\text{prevhospadult}} &amp; \text{if age} \geq 14
\end{cases} \\
P(k = 1 \mid t) &amp;= P(k = 1 \mid t - 1) \cdot (1 - P(k = 4 \mid t)) \\
P(k = 2 \mid t) &amp;= P(k = 2 \mid t - 1) \cdot (1 - P(k = 4 \mid t)) \\
P(k = 3 \mid t) &amp;= P(k = 3 \mid t - 1) \cdot (1 - P(k = 4 \mid t))\end{split}\]</div>
<p>Otherwise, we use the initial probabilities of each severity level. Then, to determine the
number of exacerbations of each severity level, we use a multinomial distribution:</p>
<div class="math notranslate nohighlight">
\[p(x_1, x_2, x_3, x_4; n, p) =
    \dfrac{n!}{x_1! x_2! x_3! x_4!} \prod_{i=1}^4 P(k = i)^{x_i}, \quad \text{where} \quad \sum_{i=1}^4 x_i = n\]</div>
<h4 id="step-6-update-the-number-of-hospitalizations">Step 6: Update the number of hospitalizations<a class="headerlink" href="#step-6-update-the-number-of-hospitalizations" title="Permalink to this heading">¶</a></h4>
<p>We add the total previous hospitalizations to the current year’s number of exacerbations at
severity level 4:</p>
<div class="math notranslate nohighlight">
\[\text{hospitalizations} = \text{previous hospitalizations} + x_4\]</div>
<p>where <span class="math notranslate nohighlight">\(x_4\)</span> is the number of exacerbations at severity level 4.
Continue to Step 8.</p>
<h4 id="step-7-reassess-asthma-diagnosis">Step 7: Reassess asthma diagnosis<a class="headerlink" href="#step-7-reassess-asthma-diagnosis" title="Permalink to this heading">¶</a></h4>
<p>If the agents has been diagnosed with asthma, we want to check if they were misdiagnosed, or if
they lose their diagnosis. For this we use a Bernoulli distribution:</p>
<div class="math notranslate nohighlight">
\[\begin{split}p &amp;:= \text{probability of a person with asthma keeping their diagnosis} \\
P(\text{agent keeps diagnosis}) &amp;= p \\
P(\text{agent loses diagnosis}) &amp;= q = 1 - p\end{split}\]</div>
<h4 id="step-8-compute-utility">Step 8: Compute utility<a class="headerlink" href="#step-8-compute-utility" title="Permalink to this heading">¶</a></h4>
<p>Utility is a measure of the agent’s quality of life, which can be affected by asthma control,
exacerbations, and hospitalizations. We compute the utility for the agent in the current year
using the <a class="reference internal" href="model-utility.html#utility-model"><span class="std std-ref">Utility Model</span></a>:</p>
<div class="math notranslate nohighlight">
\[u := u_{\text{baseline}} - A \cdot \left(
  \sum_{S=1}^{4} d_E(S) \cdot n_E(S) + \sum_{L=1}^{3} d_C(L) \cdot C(L)
\right)\]</div>
<p>where:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(u_{\text{baseline}}\)</span> is the baseline utility for a person of a given age and sex
(without asthma)</p></li>
<li><p><span class="math notranslate nohighlight">\(d_{E}(S)\)</span> is the disutility due to an asthma exacerbation of severity level <span class="math notranslate nohighlight">\(S\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(n_E(S)\)</span> is the number of asthma exacerbations of severity level <span class="math notranslate nohighlight">\(S\)</span> in a year</p></li>
<li><p><span class="math notranslate nohighlight">\(S \in \{1, 2, 3, 4\}\)</span> is the asthma exacerbation severity level (1 = mild, 2 =
moderate, 3 = severe, 4 = very severe)</p></li>
<li><p><span class="math notranslate nohighlight">\(d_{C}\)</span> is the disutility due to having asthma at control level <span class="math notranslate nohighlight">\(L\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(C(L)\)</span> is the proportion of the year spent at asthma control level <span class="math notranslate nohighlight">\(L\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(L \in \{1, 2, 3\}\)</span> is the asthma control level (1 = well-controlled, 2 =
partially-controlled, 3 = uncontrolled)</p></li>
<li><p><span class="math notranslate nohighlight">\(A\)</span> is a boolean indicating whether the person has asthma</p></li>
</ul>
<h4 id="step-9-compute-cost">Step 9: Compute cost<a class="headerlink" href="#step-9-compute-cost" title="Permalink to this heading">¶</a></h4>
<p>Next, we compute the cost due to asthma for the agent in Canadian dollars using the
<a class="reference internal" href="model-cost.html#cost-model"><span class="std std-ref">Asthma Cost Model</span></a>:</p>
<div class="math notranslate nohighlight">
\[\text{cost} = \sum_{S=1}^4 n_E(S) \cdot \text{cost}_E(S) +
  \sum_{L=1}^3 P(L) \cdot \text{cost}_C(L)\]</div>
<p>where:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(n_E(S)\)</span> is the number of exacerbations at severity level <span class="math notranslate nohighlight">\(S\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(\text{cost}_E(S)\)</span> is the cost of an exacerbation at severity level <span class="math notranslate nohighlight">\(S\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(P(L)\)</span> is the probability of being at asthma control level <span class="math notranslate nohighlight">\(L\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(\text{cost}_C(L)\)</span> is the cost of being at asthma control level <span class="math notranslate nohighlight">\(L\)</span></p></li>
</ul>
<h4 id="step-10-check-if-agent-dies">Step 10: Check if agent dies<a class="headerlink" href="#step-10-check-if-agent-dies" title="Permalink to this heading">¶</a></h4>
<p>We use the <a class="reference internal" href="model-death.html#mortality-model"><span class="std std-ref">Mortality Model</span></a> to determine if the agent dies in the current year of their lifetime.
If the agent dies, we finish simulating that agent and go on to the next agent. If the agent does
not die, we increment their age by 1 and go back to <a class="reference internal" href="#step-1-lifetime-iteration"><span class="std std-ref">Step 1: Check if agent has asthma</span></a> to repeat the
process for the next year of their life.</p>
<p>To compute the probability of death, we use the following formula:</p>
<div class="math notranslate nohighlight">
\[\sigma^{-1}(q_x(\text{sex}, \text{age})) =
    \sigma^{-1}(q_{x_0}(\text{sex}, \text{age})) -
    \beta_{\text{sex}}(\text{year} - \text{year}_0)\]</div>
<p>where:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(q_x\)</span> is the probability of death between age <span class="math notranslate nohighlight">\(x\)</span> and <span class="math notranslate nohighlight">\(x + 1\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(\sigma^{-1}\)</span> is the logit function</p></li>
<li><p><span class="math notranslate nohighlight">\(q_{x_0}\)</span> is the baseline probability of death between age <span class="math notranslate nohighlight">\(x_0\)</span> and <span class="math notranslate nohighlight">\(x_0 + 1\)</span>,
where <span class="math notranslate nohighlight">\(x_0\)</span> is the age in the base year <span class="math notranslate nohighlight">\(\text{year}_0\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(\text{year}\)</span> is the current year in the simulation</p></li>
<li><p><span class="math notranslate nohighlight">\(\text{year}_0\)</span> is the starting year in the simulation</p></li>
</ul>
<p>Finally, we determine if the agent dies using a Bernoulli distribution:</p>
<div class="math notranslate nohighlight">
\[\text{is_dead} \sim \text{Bernoulli}(q_x(\text{sex}, \text{age}))\]</div>
<h4 id="step-11-check-if-agent-emigrates">Step 11: Check if agent emigrates<a class="headerlink" href="#step-11-check-if-agent-emigrates" title="Permalink to this heading">¶</a></h4>
<p>We use the <a class="reference internal" href="model-migration.html#migration-model"><span class="std std-ref">Immigration / Emigration Model</span></a> to determine if the agent emigrates to another province or country
in the current year of their lifetime. If the agent emigrates, we finish simulating that agent and
go on to the next agent. If the agent does not emigrate, we increment their age by 1 and go back to
<a class="reference internal" href="#step-1-lifetime-iteration"><span class="std std-ref">Step 1: Check if agent has asthma</span></a> to repeat the process for the next year of their life.</p>
<div class="math notranslate nohighlight">
\[\text{emigrates} \sim \text{Bernoulli}(p_{\text{emigrate}}(\text{sex}, \text{age}, \text{year}))\]</div>







  
  






                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        &#169; Copyright 2024, Tae Yoon (Harry) Lee, Ainsleigh Hill, Mark Ewert.
        
    </div>
  
    Created using
    <a href="https://www.sphinx-doc.org/" target="_blank" rel="noopener">Sphinx</a>
    7.0.0.
     and
    <a href="https://github.com/jbms/sphinx-immaterial/" target="_blank" rel="noopener">Sphinx-Immaterial</a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/resplab/leap/" target="_blank" rel="noopener" title="Source on github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "navigation.sections", "navigation.top", "search.share", "toc.follow", "toc.sticky", "content.tabs.link", "announce.dismiss", "content.code.annotate"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
      
        <script src="../_static/sphinx_immaterial_theme.32136f45f91ae6956.min.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script id="MathJax-script" src="../_static/mathjax/tex-mml-chtml.js"></script>
    
  </body>
</html>