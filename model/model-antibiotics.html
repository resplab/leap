


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="model-glm.html">
      
      
        <link rel="next" href="model-occurrence.html">
      
      
      <link rel="icon" href="">
    
    
      
        <title>Antibiotic Exposure Model - </title>
      
    
    
      
        
      
      


    
    
      
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="../_static/sphinx_immaterial_theme.b93a8eec3bdbabd15.min.css" />
        <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#datasets" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="" class="md-header__button md-logo" aria-label="" data-md-component="logo">
      <img src="../_static/logo.png" alt="logo">
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Antibiotic Exposure Model
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/resplab/leap/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    LEAP
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="" class="md-nav__button md-logo" aria-label="" data-md-component="logo">
      <img src="../_static/logo.png" alt="logo">
    </a>
    
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/resplab/leap/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    LEAP
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span title="/installation.rst (reference label)"><span>Installation</span></span>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span title="/cli/index.rst (reference label)"><span>Running LEAP</span></span>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    <span title="/model/index.rst (reference label)"><span>Model</span></span>
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            <span title="/model/index.rst (reference label)"><span>Model</span></span>
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="model-glm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span title="/model/model-glm.ipynb (reference label)"><span>Generalized Linear Models</span></span>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    <span title="/model/model-antibiotics.rst (reference label)"><span>Antibiotic Exposure Model</span></span>
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    <span title="/model/model-antibiotics.rst (reference label)"><span>Antibiotic Exposure Model</span></span>
    
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      <span title="/model/model-antibiotics.rst (reference label)"><span>Antibiotic Exposure Model</span></span>
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#datasets" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-antibiotics.rst#datasets (reference label)"><span>Datasets</span></span>
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model-generalized-linear-model-negative-binomial" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-antibiotics.rst#model-generalized-linear-model-negative-binomial (reference label)"><span>Model:<wbr> Generalized Linear Model -<wbr> Negative Binomial</span></span>
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Model: Generalized Linear Model - Negative Binomial">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#probability-distribution" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-antibiotics.rst#probability-distribution (reference label)"><span>Probability Distribution</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#link-function" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-antibiotics.rst#link-function (reference label)"><span>Link Function</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formula" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-antibiotics.rst#formula (reference label)"><span>Formula</span></span>
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="model-occurrence.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span title="/model/model-occurrence.rst (reference label)"><span>Asthma Occurrence Model</span></span>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="model-control.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span title="/model/model-control.rst (reference label)"><span>Asthma Control Model</span></span>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="model-utility.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span title="/model/model-utility.rst (reference label)"><span>Utility Model</span></span>
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../dev/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span title="/dev/index.rst (reference label)"><span>Developers</span></span>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../references.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    <span title="/references.rst (reference label)"><span>References</span></span>
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      <span title="/model/model-antibiotics.rst (reference label)"><span>Antibiotic Exposure Model</span></span>
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#datasets" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-antibiotics.rst#datasets (reference label)"><span>Datasets</span></span>
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model-generalized-linear-model-negative-binomial" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-antibiotics.rst#model-generalized-linear-model-negative-binomial (reference label)"><span>Model:<wbr> Generalized Linear Model -<wbr> Negative Binomial</span></span>
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Model: Generalized Linear Model - Negative Binomial">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#probability-distribution" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-antibiotics.rst#probability-distribution (reference label)"><span>Probability Distribution</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#link-function" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-antibiotics.rst#link-function (reference label)"><span>Link Function</span></span>
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formula" class="md-nav__link">
    
    <span class="md-ellipsis">
      <span title="/model/model-antibiotics.rst#formula (reference label)"><span>Formula</span></span>
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                
                
                  


  
  

<h1 id="antibiotic-exposure-model"><span id="id1"></span>Antibiotic Exposure Model<a class="headerlink" href="#antibiotic-exposure-model" title="Permalink to this heading">¶</a></h1>
<p>In this section, we will describe the model used to predict the number of antibiotics prescribed
to infants in their first year of life. This model will be incorporated into the risk factors
for developing asthma later in life.</p>
<h2 id="datasets">Datasets<a class="headerlink" href="#datasets" title="Permalink to this heading">¶</a></h2>
<p>We obtained data from the <code class="docutils literal notranslate"><span class="pre">BC</span> <span class="pre">Ministry</span> <span class="pre">of</span> <span class="pre">Health</span></code> on the number of antibiotics prescribed to
infants in their first year of life. The data is available for the years <code class="docutils literal notranslate"><span class="pre">2000</span></code> to <code class="docutils literal notranslate"><span class="pre">2018</span></code>. The
data is formatted as follows:</p>
<table class="table">
  <thead>
    <tr>
        <th>Column</th>
        <th>Type</th>
        <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="notranslate">year</code></td>
      <td>
        <code class="notranslate">int</code>
      </td>
      <td>
        format <code>XXXX</code>, e.g <code>2000</code>, range <code>[2000, 2018]</code>
      </td>
    </tr>
      <td><code class="notranslate">sex</code></td>
      <td>
        <code class="notranslate">int</code>
      </td>
      <td>
        1 = Female, 2 = Male
      </td>
    </tr>
    <tr>
      <td><code class="notranslate">n_abx</code></td>
      <td>
        <code class="notranslate">int</code>
      </td>
      <td>
        The total number of antibiotic courses prescribed to infants in BC in a given year.
        Note that this is not per infant, it is the total for all infants.
      </td>
    </tr>
  </tbody>
  </table><p>Since the <code class="docutils literal notranslate"><span class="pre">n_abx</span></code> column gives us the <em>total</em> number of antibiotics prescribed, we need to use
population data to convert this to a <em>per infant</em> value. We obtained population data from the
<code class="docutils literal notranslate"><span class="pre">StatCan</span></code> census data (the same that is used in the <code class="docutils literal notranslate"><span class="pre">Birth</span></code> module):</p>
<table class="table">
  <thead>
    <tr>
        <th>Column</th>
        <th>Type</th>
        <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="notranslate">year</code></td>
      <td>
        <code class="notranslate">int</code>
      </td>
      <td>
        format <code>XXXX</code>, e.g <code>2000</code>, range <code>[1999, 2021]</code>
      </td>
    </tr>
      <td><code class="notranslate">sex</code></td>
      <td>
        <code class="notranslate">int</code>
      </td>
      <td>
        <code>"M"</code> = male, <code>"F"</code> = female
      </td>
    </tr>
    <tr>
      <td><code class="notranslate">n_birth</code></td>
      <td>
        <code class="notranslate">int</code>
      </td>
      <td>
        The total number of births in BC in a given year.
      </td>
    </tr>
  </tbody>
  </table><h2 id="model-generalized-linear-model-negative-binomial">Model: Generalized Linear Model - Negative Binomial<a class="headerlink" href="#model-generalized-linear-model-negative-binomial" title="Permalink to this heading">¶</a></h2>
<p>Since our model projects into the future, we would like to be able to extend this data beyond
<code class="docutils literal notranslate"><span class="pre">2018</span></code>. To obtain these projections, we use a <code class="docutils literal notranslate"><span class="pre">Generalized</span> <span class="pre">Linear</span> <span class="pre">Model</span> <span class="pre">(GLM)</span></code>. A <code class="docutils literal notranslate"><span class="pre">GLM</span></code> is a
type of regression analysis which is a generalized form of linear regression.
See <a class="reference internal" href="model-glm.html"><span class="doc">Generalized Linear Models</span></a> for more information on <code class="docutils literal notranslate"><span class="pre">GLMs</span></code>.</p>
<h3 id="probability-distribution">Probability Distribution<a class="headerlink" href="#probability-distribution" title="Permalink to this heading">¶</a></h3>
<p>When fitting a <code class="docutils literal notranslate"><span class="pre">GLM</span></code>, first you must choose a distribution for the <code class="docutils literal notranslate"><span class="pre">response</span> <span class="pre">variable</span></code>. In our
case, the response variable is the number of antibiotics prescribed during the first year of life.
The number of antibiotics prescribed is a count variable, in a given time interval
(a year, in our case). Since it is count data, we need a discrete probability distribution.
The <code class="docutils literal notranslate"><span class="pre">Poisson</span> <span class="pre">distribution</span></code> is a good choice for our data, but it has some limitations. The
<code class="docutils literal notranslate"><span class="pre">Poisson</span> <span class="pre">distribution</span></code> assumes that the mean and variance are equal, i.e:</p>
<div class="math notranslate nohighlight">
\[\mu = \sigma^2\]</div>
<p>However, in our data, the variance is greater than the mean. This is a common problem in count data,
and it is called <code class="docutils literal notranslate"><span class="pre">overdispersion</span></code>. The <code class="docutils literal notranslate"><span class="pre">Negative</span> <span class="pre">Binomial</span></code> distribution is a generalization of
the <code class="docutils literal notranslate"><span class="pre">Poisson</span></code> distribution that allows for overdispersion. The <code class="docutils literal notranslate"><span class="pre">Negative</span> <span class="pre">Binomial</span></code> distribution
has an extra parameter, <span class="math notranslate nohighlight">\(\theta\)</span>, which controls the amount of overdispersion. Typically,
the distribution is written as:</p>
<div class="math notranslate nohighlight">
\[P(Y = k; r, p) := \binom{k+r-1}{k}(1-p)^k p^r\]</div>
<p>where:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(k\)</span> is the number of failures before <span class="math notranslate nohighlight">\(r\)</span> successes occur</p></li>
<li><p><span class="math notranslate nohighlight">\(p\)</span> is the probability of a success</p></li>
<li><p><span class="math notranslate nohighlight">\(r\)</span> is the number of successes</p></li>
</ul>
<p>We can reparametrize this with <span class="math notranslate nohighlight">\(\mu\)</span> and <span class="math notranslate nohighlight">\(\theta\)</span> using the following equations:</p>
<div class="math notranslate nohighlight">
\[\begin{split}p &amp;= \dfrac{\mu}{\sigma^2} \\
r &amp;= \dfrac{\mu^2}{\sigma^2 - \mu} \\
\sigma^2 &amp;= \mu + \dfrac{\mu^2}{\theta}\end{split}\]</div>
<p>where <span class="math notranslate nohighlight">\(\mu\)</span> is the mean, <span class="math notranslate nohighlight">\(\sigma^2\)</span> is the variance, and <span class="math notranslate nohighlight">\(\theta\)</span> is the
overdispersion parameter.</p>
<p>Doing some algebra, we have:</p>
<div class="math notranslate nohighlight">
\[\begin{split}p &amp;= \dfrac{\mu}{\sigma^2} = \dfrac{\mu}{\mu + \dfrac{\mu^2}{\theta}} = \dfrac{\theta}{\theta + \mu} \\
r &amp;= \dfrac{\mu^2}{\sigma^2 - \mu} = \dfrac{\mu^2}{\mu + \dfrac{\mu^2}{\theta} - \mu}
= \dfrac{\mu^2}{\dfrac{\mu^2}{\theta}}
= \theta\end{split}\]</div>
<p>Letting <span class="math notranslate nohighlight">\(y = k\)</span>, we have:</p>
<div class="math notranslate nohighlight">
\[\begin{split}P(Y = y; \mu, \theta) &amp;= \binom{y + \theta - 1}{y}
    \left(1-\dfrac{\theta}{\theta + \mu}\right)^y
    \left(\dfrac{\theta}{\theta + \mu}\right)^{\theta} \\
&amp;= \binom{y + \theta - 1}{y}
    \left(\dfrac{\theta + \mu - \theta}{\theta + \mu}\right)^y
    \left(\dfrac{\theta}{\theta + \mu}\right)^{\theta} \\
&amp;= \binom{y + \theta - 1}{y}
    \dfrac{\mu^y \theta^{\theta}}{(\theta + \mu)^{y+\theta}}\end{split}\]</div>
<p>We added an upper bound on the mean parameter to prevent unrealistic extrapolation:</p>
<div class="math notranslate nohighlight">
\[\mu^{(i)} = E(Y | X = x^{(i)}) \leq 0.05\]</div>
<p>In other words, we are saying that the mean number of antibiotics prescribed to an infant in their
first year of life is less than or equal to <code class="docutils literal notranslate"><span class="pre">0.05</span></code>.</p>
<p>So we have:</p>
<div class="math notranslate nohighlight">
\[\begin{split}P(Y = y; \mu, \theta) &amp;= p(y; \mu^{(i)}, \theta^{(i)}) =
    \binom{y + \theta^{(i)} - 1}{y}
    \dfrac{(\mu^{(i)})^y (\theta^{(i)})^{\theta^{(i)}}}{(\theta^{(i)} + \mu^{(i)})^{y + \theta^{(i)}}} \\
\mu^{(i)} &amp;= \text{max}(0.05, \mu^{(i)})\end{split}\]</div>
<h3 id="link-function">Link Function<a class="headerlink" href="#link-function" title="Permalink to this heading">¶</a></h3>
<p>We also need to choose a <code class="docutils literal notranslate"><span class="pre">link</span> <span class="pre">function</span></code>. Recall that the link function <span class="math notranslate nohighlight">\(g(\mu^{(i)})\)</span>
is used to relate the mean to the predicted value <span class="math notranslate nohighlight">\(\eta^{(i)}\)</span>:</p>
<div class="math notranslate nohighlight">
\[\begin{split}g(\mu^{(i)}) &amp;= \eta^{(i)} \\
\mu^{(i)} &amp;= E(Y | X = x^{(i)})\end{split}\]</div>
<p>How do we choose a link function? Well, we are free to choose any link function we like, but there
are some constraints. For example, in the Negative Binomial distribution, the mean is always
<code class="docutils literal notranslate"><span class="pre">&gt;=</span> <span class="pre">0</span></code>. However, <span class="math notranslate nohighlight">\(\eta^{(i)}\)</span> can be any real number. Therefore, we need a link function
that maps real numbers to non-negative numbers. The <code class="docutils literal notranslate"><span class="pre">log</span> <span class="pre">link</span> <span class="pre">function</span></code> is a good choice for this:</p>
<div class="math notranslate nohighlight">
\[g(\mu^{(i)}) = \log(\mu^{(i)}) = \eta^{(i)}\]</div>
<h3 id="formula">Formula<a class="headerlink" href="#formula" title="Permalink to this heading">¶</a></h3>
<p>Now that we have our distribution and link function, we need to decide on a formula for
<span class="math notranslate nohighlight">\(\eta^{(i)}\)</span>. We are permitted to use linear combinations of functions of the features
in our dataset.</p>
<p>For our dataset, we want a formula using <code class="docutils literal notranslate"><span class="pre">sex</span></code> and <code class="docutils literal notranslate"><span class="pre">year</span></code>. Since prescribing practices change
over time, and since infections requiring antibiotic prescriptions also change over time,
we should include year in our formula. We also want to include sex, since there are sex differences
in antibiotic prescriptions.</p>
<p>There is an additional factor specific to BC regulations. In 2005, the BC government introduced
an antibiotic conservation program, which reduced the number of antibiotics prescribed
<span id="id2">[<a class="reference internal" href="../references.html#id3" title="A. Mamun, B. Zhao, M. McCabe, and et al. Cost-benefit analysis of a population-based education program on the wise use of antibiotics. Can J Public Health, 110:732-740, 2019. URL: https://doi.org/10.17269/s41997-019-00245-w, doi:10.17269/s41997-019-00245-w.">5</a>]</span>. It stands to reason that the formula may change before and after 2005. To
account for this, we will introduce a <code class="docutils literal notranslate"><span class="pre">Heaviside</span> <span class="pre">step</span> <span class="pre">function</span></code>, which returns <code class="docutils literal notranslate"><span class="pre">0</span></code> for values
below a given threshold, and <code class="docutils literal notranslate"><span class="pre">1</span></code> for values above the threshold. In our case, the threshold
is <code class="docutils literal notranslate"><span class="pre">2005</span></code>.</p>
<div class="math notranslate nohighlight">
\[\eta^{(i)} = \beta_0 + \beta_s \cdot s^{(i)} + \beta_t \cdot t^{(i)} +
    \beta_h \cdot H(t^{(i)} - 2005) +
    \beta_{th} \cdot t \cdot H(t^{(i)} - 2005)\]</div>
<p>where:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(s^{(i)}\)</span> is the sex of the infant</p></li>
<li><p><span class="math notranslate nohighlight">\(t^{(i)}\)</span> is the year of birth of the infant</p></li>
<li><p><span class="math notranslate nohighlight">\(H(t^{(i)} - 2005)\)</span> is the <code class="docutils literal notranslate"><span class="pre">Heaviside</span> <span class="pre">step</span> <span class="pre">function</span></code>, which is <code class="docutils literal notranslate"><span class="pre">0</span></code> for years before
<code class="docutils literal notranslate"><span class="pre">2005</span></code> and <code class="docutils literal notranslate"><span class="pre">1</span></code> for years after <code class="docutils literal notranslate"><span class="pre">2005</span></code></p></li>
</ul>







  
  






                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        &#169; Copyright 2024, Tae Yoon (Harry) Lee, Ainsleigh Hill, Mark Ewert.
        
    </div>
  
    Created using
    <a href="https://www.sphinx-doc.org/" target="_blank" rel="noopener">Sphinx</a>
    7.0.0.
     and
    <a href="https://github.com/jbms/sphinx-immaterial/" target="_blank" rel="noopener">Sphinx-Immaterial</a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/resplab/leap/" target="_blank" rel="noopener" title="Source on github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "navigation.sections", "navigation.top", "search.share", "toc.follow", "toc.sticky", "content.tabs.link", "announce.dismiss", "content.code.annotate"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
      
        <script src="../_static/sphinx_immaterial_theme.32136f45f91ae6956.min.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script id="MathJax-script" src="../_static/mathjax/tex-mml-chtml.js"></script>
    
  </body>
</html>